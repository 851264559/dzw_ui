<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>人事-组织机构</title>
		<link rel="stylesheet" href="../../css/element.css" />
	</head>
	<body>
		<div class="pb" id="ppp">
			<el-container>
				<el-header>
					<h1 style="text-align: center;">组织机构</h1>
				</el-header>
				<el-container>
					<el-aside style="width:250px;">
						<template>
							<el-button type="primary" size="mini">新增</el-button>
							<el-button type="warning" size="mini">修改</el-button>
							<el-button type="danger" size="mini">删除</el-button><br /><br />
							<input type="text" name="xment" />
							<el-table :data="person" ref="singleTable" highlight-current-row @current-change="handleCurrentChange">
								<el-table-column label="北京德招文卡车系统">
									<template slot-scope="temp">
										{{temp.row.bname}}
									</template>
								</el-table-column>
							</el-table>
						</template>
					</el-aside>
					<el-main>
						<template>
							<el-row :gutter="20">
								<el-col align="right">
									<el-button @click="isShow=true" type="primary" size="mini">新增员工</el-button>
									<el-dialog :before-close="handlerClose" @opened="handlerOpen" :visible.sync="isShow" title="新增员工" center>
										<div id="cnt" v-loading="loading">
										</div>
									</el-dialog>
									<el-button @click="isShows=true" type="warning" size="mini">修改员工</el-button>
									<el-dialog :before-close="handlerClose" @opened="handlerOpenn" :visible.sync="isShows" title="修改员工" center>
										<div id="cntt" v-loading="loading">
										</div>
									</el-dialog>
									<el-button type="danger" size="mini">删除员工</el-button>
								</el-col>
							</el-row>
							<el-table ref="singleTable" :data="tableData" highlight-current-row @current-change="handleCurrentChange">
								<el-table-column label="编号" type="index">
								</el-table-column>
								<el-table-column property="name" label="姓名">
								</el-table-column>
								<el-table-column property="sex" label="性别">
								</el-table-column>
								<el-table-column property="phone" label="手机号码">
								</el-table-column>
								<el-table-column property="address" label="地址">
								</el-table-column>
								<el-table-column property="ment" label="部门">
								</el-table-column>
								<el-table-column property="zw" label="职位">
								</el-table-column>
							</el-table>
						</template>
					</el-main>
				</el-container>
			</el-container>
		</div>
	</body>
	<script>
		var ppp = new Vue({
			data() {
				return {
					loading:true,
					isShow:false,
					isShows:false,
					person: {
					},
					tableData: [{
						name: '王小虎',
						sex: '男',
						phone: '1111111',
						address: 'hh',
						ment: 'ff',
						zw: 'ww'
					}, {
						name: '王小虎2',
						sex: '男',
						phone: '1111111',
						address: 'hh',
						ment: 'ff',
						zw: 'ww'
					}],
					currentRow: null

				}
			},
			methods: {
				setCurrent(row) {
					this.$refs.singleTable.setCurrentRow(row);
				},
				handleCurrentChange(val) {
					this.currentRow = val;
				},
				handlerClose(done) {
					this.$confirm('是否关闭?', '提示', {
						confirmButtonText: '确定',
						cancelButtonText: '取消',
						type: 'warning'
					}).then(() => {
						done(); //关闭
					}).catch(() => {
						this.$message({
							type: 'info',
							message: '已取消删除'
						});
					});
				},
				handlerOpen() {
					$("#cnt").load("../TY/xzyg.html");
				},
				handlerOpenn() {
					$("#cntt").load("../TY/xgyg.html");
				}
			},mounted() {
				let _this = this;
				axios.get(`http://127.0.0.1:8080/dzw_sys/ty/api/ment/b`).then(function(resp) {
					_this.person = resp.data;
				})
			}
		}).$mount("#ppp");
	</script>
</html>